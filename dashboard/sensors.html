<!doctype html>
<html lang="de">
  <head>

    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>{{v_Application}}</title>

     <!-- Bootstrap core CSS -->

<link href="/static/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
            #chartdiv {
            width: 50%;
            height: 350px;
            }
    </style>


    <!-- Custom styles for this template -->
    <link href="/static/dashboard.css" rel="stylesheet">

  </head>
  <body>
<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
  <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">{{v_Application}}</a>
  <button aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler position-absolute d-md-none collapsed" data-bs-target="#sidebarMenu" data-bs-toggle="collapse" type="button">
    <span class="navbar-toggler-icon"></span>
  </button>
                     <div class="btn-group">
    {% for sensor in sensor_data1 %}
        <a href="#" class="btn btn-success">{{ sensor_data1[sensor].name }} {{ sensor_data1[sensor].value }}</a>
    {% endfor %}
    <div class="dropdown">
  <button class="btn btn-danger dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
    SmartPlanter
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
    <li><a class="dropdown-item" href="/system/restart">Smart Planter Neustarten</a></li>
    <li><a class="dropdown-item" href="/system/restartos">System Neustarten</a></li>
  </ul>
</div></div>
</header>
<main>
<div class="container-fluid">
  <div class="row">
    <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse" id="sidebarMenu">
      <div class="position-sticky pt-3">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a aria-current="page" class="nav-link active" href="/">
              <span data-feather="home"></span>
              Dashboard
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/Light/">
              <span class="bi bi-brightness-high"></span>
              Licht
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/Pumps/">
              <span class="bi bi-droplet-half"></span>
              Bewässerung
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/Sensors/">
             <span class="bi bi-thermometer-sun"></span>
              Sensoren
            </a>
          </li>
          <li class="nav-item" >
            <a class="nav-link" href="/Stats">
              <span ></span>
             <span class="bi bi-clipboard-data"></span>
              Statistik
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/Webcam/">
              <span class="bi bi-webcam"></span>
              Webcam
            </a>
          </li>
        </ul>
      </div>

    </nav>

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Sensoren</h1>

      </div>   <div class="row align-items-start">
    <div class="col">
      Letzte Messung :<div class="btn-group">
    {% for sensor in sensor_data1 %}
        <a href="#" class="btn btn-success">{{ sensor_data1[sensor].name }} {{ sensor_data1[sensor].value }}</a>
    {% endfor %}</div>
    </div>
  </div>



 <script>
window.onload = function () {

var Temperatur = {
    zoomEnabled: true,
	exportEnabled: true,
	animationEnabled: true,

	title: {
		text: "Temperatur"
	},
	data: [
	{
	    lineColor: "blue",
	    color: "blue",
	    xValueFormatString: "DD-MM-YYYY",
	    yValueFormatString: "##.#°C",
		type: "splineArea",
		legendText: "Raumtemperatur",
		showInLegend: true,
		dataPoints: [
 {% for sensor in sensor_daten %}
    {% if sensor_daten[sensor].Type== "Temperatur" %}
       { x: new Date{{sensor_daten[sensor].DATE}}, y: {{sensor_daten[sensor].VALUE}}},
    {% else %}
    {% endif %}
 {% endfor %}]
		}
	]
};
var Feuchtigkeit = {
    zoomEnabled: true,
	exportEnabled: true,
	animationEnabled: true,
	title: {
		text: "Luftfeuchtigkeit"
	},
	data: [
	{
	    lineColor: "darkgreen",
	    color: "darkgreen",
	    xValueFormatString: "DD-MM-YYYY",
	    yValueFormatString: "##.#%",
	    legendText: "Luftfeuchtigkeit",
	    showInLegend: true,
		type: "splineArea",
		dataPoints: [
 {% for sensor in sensor_daten %}
    {% if sensor_daten[sensor].Type== "Feuchtigkeit" %}
       { x: new Date{{sensor_daten[sensor].DATE}}, y: {{sensor_daten[sensor].VALUE}}},
    {% else %}
    {% endif %}
 {% endfor %}]
		}
	]
};
$("#TemperaturChart").CanvasJSChart(Temperatur);
$("#FeuchtigkeitChart").CanvasJSChart(Feuchtigkeit);

}
</script>
       <div class="row align-items-start">
    <div class="col">
       <div id="TemperaturChart" style="height: 300px; width: 100%;"></div>
    </div>
    <div class="col">
      <div id="FeuchtigkeitChart" style="height: 300px; width: 100%;"></div>
    </div>
  </div>


</div>
</div>


<script>
const config = {
  type: 'doughnut',
  data: data,
  plugins: [plugin],
};
const data = {
  labels: [
    'Red',
    'Blue',
    'Yellow'
  ],
  datasets: [{
    label: 'My First Dataset',
    data: [300, 50, 100],
    backgroundColor: [
      'rgb(255, 99, 132)',
      'rgb(54, 162, 235)',
      'rgb(255, 205, 86)'
    ],
    hoverOffset: 4
  }]
};
// Note: changes to the plugin code is not reflected to the chart, because the plugin is loaded at chart construction time and editor changes only trigger an chart.update().
const image = new Image();
image.src = 'https://www.chartjs.org/img/chartjs-logo.svg';

const plugin = {
  id: 'custom_canvas_background_image',
  beforeDraw: (chart) => {
    if (image.complete) {
      const ctx = chart.ctx;
      const {top, left, width, height} = chart.chartArea;
      const x = left + width / 2 - image.width / 2;
      const y = top + height / 2 - image.height / 2;
      ctx.drawImage(image, x, y);
    } else {
      image.onload = () => chart.draw();
    }
  }
</script>
<canvas id="myChart"></canvas>
 <script>
       var ctx = document.getElementById('myChart').getContext('2d');
      var myChart = new Chart(ctx, {
          type: 'line',
          data: {
                datasets: [{
                data: [
                {% for sensor in sensor_daten %}
                {% if sensor_daten[sensor].Type== "Feuchtigkeit" %}
                 {{sensor_daten[sensor].VALUE}},
                {% else %}
                {% endif %}
                {% endfor %}
                ],
                label: "Total",
                borderColor: "#3e95cd",
                backgroundColor: "#7bb6dd",
                fill: False,
              }, {
                data: [70,90,44,60,83,90,100],
                label: "Accepted",
                borderColor: "#3cba9f",
                backgroundColor: "#71d1bd",
                fill: False,
              }, {
                data: [10,21,60,44,17,21,17],
                label: "Pending",
                borderColor: "#ffa500",
                backgroundColor:"#ffc04d",
                fill: False,
              }, {
                data: [6,3,2,2,7,0,16],
                label: "Rejected",
                borderColor: "#c45850",
                backgroundColor:"#d78f89",
                fill: False,
              }
            ]
          },
        });
    </script>
  </main>
<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
<script src="/static/bootstrap.bundle.min.js"></script>
{{ fontawesome_js() }}

  <script crossorigin="anonymous" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js"></script><script crossorigin="anonymous" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script><script src="/static/dashboard.js"></script>
<script>
  $canvas.canvasjs-chart-credit.display = "none";
</script>

  </body>
</html>
